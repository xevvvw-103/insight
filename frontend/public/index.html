<!DOCTYPE html>
<html>
<head>
	<meta http-equiv="Content-type" content="text/html; charset=utf-8"/>
	<title>310 Frontend</title>
	<link rel="stylesheet" href="/style.css">
	<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDUdrL66x0sAd1Vms5Wt7r2GNDoF4BLQLM" async defer></script>
	<script src="/jquery.min.js" type="text/javascript"></script>
	<script src="/main.js" type="text/javascript"></script>
	<script src="/d3.min.js" type="text/javascript"></script>
</head>

<body>
<div class="navbar">
	<ul>
		<li><a class="active" href="http://localhost:4321/">CampusExplorer</a></li>
		<li><a id="courses" href="/courses.html">Courses</a></li>
		<li><a id="rooms" href="/rooms.html">Rooms</a></li>
		<li><a id="routes" href="/routes.html">GuideMeThere</a></li>
	</ul>
</div>
<!--<div id="GPABooster">-->
<!--	<button id="click">GPA Boosters</button>-->
<!--</div>-->
<div id="container">
	<form id="query">
		<div id="main">
		</div>
	</form>
	<div id="map"></div>
</div>




<script>

	//need to add lat lons from query
	var neighborhoods = [];


	function setNeighborhood(arr) {
		neighborhoods = arr;
	}


	var markers = [];
	var map;

	function initMap() {
		map = new google.maps.Map(document.getElementById('map'), {
			center: {lat: 49.259389, lng: -123.247346},
			zoom: 20
		});
	}

	function drop() {
		console.log("done");
		clearMarkers();
		for (var i = 0; i < neighborhoods.length; i++) {
			console.log("hey");
			addMarkerWithTimeout(neighborhoods[i]["location"], i * 150, "<b>" + neighborhoods[i]["room"] + "</b><hr>" + neighborhoods[i]["courses"]);
		}


	}



	function addMarkerWithTimeout(position, timeout,title) {
		var myMarker = new google.maps.Marker({
			position: position,
			map: map,
			animation: google.maps.Animation.DROP
		});
		var infowindow = new google.maps.InfoWindow({
			content: title
		});
		myMarker.addListener('click', function() {
			infowindow.open(map, myMarker);
		});
		window.setTimeout(function() {
			markers.push(myMarker);
		}, timeout);

	}


	function clearMarkers() {
		for (var i = 0; i < markers.length; i++) {
			markers[i].setMap(null);
		}
		markers = [];
	}


</script>
</body>

</html>
